@if (
  (
    directories
    | directoryFilter: filterValue
    | directoryFilterStartLetterPipe: filterByStartCharValue
  ).length
) {
  <div class="browse-title">
    <div class="flex-grow tracking-wide text-2xl">
      @if (dirQp === "/") {
        <span>Directories</span>
      }
      @if (dirQp !== "/") {
        <span>{{ dirQpLabel }}</span>
      }
    </div>
    @if (dirQp === "/") {
      <mat-icon
        (click)="toggleFilter()"
        class="clickable"
        title="Filter directories by their starting letter"
        >filter_list
      </mat-icon>
    }
  </div>
}
@if (filterVisible) {
  <div>
    <mat-divider></mat-divider>
    <div class="flex flex-row justify-between mb-2 tracking-tight text-sm">
      <mat-icon
        (click)="setStartLetterFilter('')"
        class="clickable accent-text-hover"
        >clear
      </mat-icon>
      @for (letter of letters; track letter) {
        <span
          (click)="setStartLetterFilter(letter)"
          [class.accent-text]="filterByStartCharValue === letter"
          class="clickable accent-text-hover"
          >{{ letter }}</span
        >
      }
    </div>
  </div>
}

<div class="flex flex-col gap-y-2">
  @for (
    directory of directories
      | directoryFilter: filterValue
      | directoryFilterStartLetterPipe: filterByStartCharValue
      | slice: paginationFrom : paginationTo;
    track directory
  ) {
    <app-directory-entry [directory]="directory"></app-directory-entry>
  }

  @if (
    (directories | directoryFilter: filterValue).length > 0 &&
    paginationTo - paginationFrom <
      (directories | directoryFilter: filterValue).length
  ) {
    <mat-paginator
      [length]="directories.length"
      (page)="getPaginatorData($event)"
      [pageSizeOptions]="pageSizeOptions"
      showFirstLastButtons="true"
      [pageSize]="paginationTo - paginationFrom"
    >
    </mat-paginator>
  }
</div>

<!-- Cover grid -->
<div class="mt-24">
  <app-cover-grid
    [directories]="
      directories
        | directoryFilter: filterValue
        | directoryFilterStartLetterPipe: filterByStartCharValue
        | slice: paginationFrom : paginationTo
    "
    [dirQp]="dirQp"
  ></app-cover-grid>
</div>
